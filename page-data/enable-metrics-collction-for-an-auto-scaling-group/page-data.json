{"componentChunkName":"component---src-templates-post-jsx","path":"/enable-metrics-collction-for-an-auto-scaling-group","result":{"data":{"markdownRemark":{"html":"<p>You created an auto scaling group through the management console. The issue is \"group metrics collection is not enabled for the following auto scaling groups\" and; you would simply like to know how to enable metric collection using the AWS CLI. Here you will a <a href=\"#aws-cli-wrapper\">bash function aws-cli wrapper</a> to help automate enabling metrics collection for autoscaling groups in AWS.</p>\n<hr>\n<p>Today in AWS, <u>enabling metrics collection for an auto scaling group</u> was on my to-do list.\n(28 Jul 2017)</p>\n<p>This page dedicated to the task of enabling auto scaling metrics collection.</p>\n<h2 id=\"introduction\" style=\"position:relative;\"><a href=\"#introduction\" aria-label=\"introduction permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Introduction</h2>\n<p>As you may know by know, group metrics collection in AWS is not enabled by default for auto scaling groups. Why?  </p>\n<ol>\n<li>Metrics collection is not free;  </li>\n<li>In most cases, autoscaling metrics collection is not need. However, if you would like to track your autoscaling capacity over time, you need to enable auto scaling metrics collection, which can be done using the aws-cli. At the time of creating this document, there was no place to click in the management console, leaving the aws-cli the only way to enable metrics collection for an auto scaling group.</li>\n</ol>\n<h2 id=\"enable-auto-scaling-metrics-collection-shortcut\" style=\"position:relative;\"><a href=\"#enable-auto-scaling-metrics-collection-shortcut\" aria-label=\"enable auto scaling metrics collection shortcut permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Enable auto scaling metrics collection shortcut</h2>\n<p>If you are really in a hurry to enable auto scaling metrics collection in AWS that you are currently working on, here is the <a href=\"#aws-cli-example\">aws-cli</a> shortcut you need. </p>\n<h2 id=\"enable-auto-scaling-metrics-collection-guide\" style=\"position:relative;\"><a href=\"#enable-auto-scaling-metrics-collection-guide\" aria-label=\"enable auto scaling metrics collection guide permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Enable auto scaling metrics collection guide</h2>\n<p>If you've ever picked up where you left off, in the middle of a test, or are in your free tier period, you will find out or be reminded that metrics collection is not enabled by default. <em>So, what do you do?</em></p>\n<!-- write about how to enable auto scaling group metrics collection -->\n<p><strong>Why enable auto scaling metrics collection?</strong></p>\n<p>Metrics collection is used by scaling policies to achieve autoscaling.</p>\n<p>Auto scaling groups are created without enabled metrics by default. Auto scaling group metrics collection may be enabled manually via command line through the aws-cli.</p>\n<h2 id=\"aws-cli\">AWS CLI</h2>\n<h3 id=\"aws-autoscaling-enable-metrics-collection\" style=\"position:relative;\"><a href=\"#aws-autoscaling-enable-metrics-collection\" aria-label=\"aws autoscaling enable metrics collection permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>aws autoscaling enable-metrics-collection</h3>\n<h4 id=\"required-options\" style=\"position:relative;\"><a href=\"#required-options\" aria-label=\"required options permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>required options</h4>\n<p>The following options are required by the 'enable-metrics-collection' command of the 'aws autoscaling' command namespace.</p>\n<h5 id=\"--auto-scaling-group-name\" style=\"position:relative;\"><a href=\"#--auto-scaling-group-name\" aria-label=\"  auto scaling group name permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>--auto-scaling-group-name</h5>\n<p>The name or ARN of the auto scaling group is required.</p>\n<!-- link to arn -->\n<h5 id=\"--granularity\" style=\"position:relative;\"><a href=\"#--granularity\" aria-label=\"  granularity permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>--granularity</h5>\n<p>Despite the only valid value being \"1Minute\", granularity is required.</p>\n<h4 id=\"aws-cli-example\">example</h4>\n<p><a name=\"enable-metrics-collection\"></a></p>\n<h5 id=\"bash-function\" style=\"position:relative;\"><a href=\"#bash-function\" aria-label=\"bash function permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>bash function</h5>\n<h6 id=\"aws-cli-wrapper\" style=\"position:relative;\"><a href=\"#aws-cli-wrapper\" aria-label=\"aws cli wrapper permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>aws-cli wrapper</h6>\n<p><code><pre>\nenable-metrics-collection() { { local auto_scaling_group_name ; auto_scaling_group_name=\"${1}\" ; }\nlocal granularity\ngranularity=\"1Minute\"\naws <br>\nautoscaling <br>\nenable-metrics-collection <br>\n--auto-scaling-group-name \"${auto_scaling_group_name}\" <br>\n--granularity \"${granularity}\"\n}</p>\n</pre></code>\n<h2 id=\"changelog\" style=\"position:relative;\"><a href=\"#changelog\" aria-label=\"changelog permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Changelog</h2>\n<p>(3 Feb 2019)\tMinor revision</p>\n<p>(12 Jan 2018)\tUpdate example converting original bash example code into a aws-cli wrapper bash function</p>\n<p>( 7 Aug 2017)\tAdd introduction</p>\n<p>(28 Jul 2017)\tCreate document</p>\n<hr>","tableOfContents":"<ul>\n<li><a href=\"/enable-metrics-collction-for-an-auto-scaling-group/#introduction\">Introduction</a></li>\n<li><a href=\"/enable-metrics-collction-for-an-auto-scaling-group/#enable-auto-scaling-metrics-collection-shortcut\">Enable auto scaling metrics collection shortcut</a></li>\n<li><a href=\"/enable-metrics-collction-for-an-auto-scaling-group/#enable-auto-scaling-metrics-collection-guide\">Enable auto scaling metrics collection guide</a></li>\n<li><a href=\"/enable-metrics-collction-for-an-auto-scaling-group/#changelog\">Changelog</a></li>\n</ul>","timeToRead":2,"excerpt":"You created an auto scaling group through the management console. The issue is \"group metrics collection is not enabled for the followingâ€¦","frontmatter":{"title":"Enable metrics collction for an auto scaling group","cover":"https://unsplash.it/1152/300/?random?BirchintheRoses","date":"29/09/2019","category":"blog","tags":["aws","aws-cli","aws-autoscaling"]},"fields":{"slug":"/enable-metrics-collction-for-an-auto-scaling-group","date":"2029-09-19T15:00:00.000Z"}}},"pageContext":{"slug":"/enable-metrics-collction-for-an-auto-scaling-group","nexttitle":"Headless Wordpress","nextslug":"/headless-wordpress","prevtitle":"Bash declare","prevslug":"/bash-declare"}},"staticQueryHashes":[]}